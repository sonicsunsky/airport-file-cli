(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-bde28338"],{8856:function(e,r,s){"use strict";s("9c93")},"9c93":function(e,r,s){},"9ed6":function(e,r,s){"use strict";s.r(r);var o=function(){var e=this,r=e.$createElement,s=e._self._c||r;return s("div",{staticClass:"login"},[e._m(0),s("div",{staticClass:"login-container"},[s("el-form",{ref:"userLoginForm",staticClass:"login-form",attrs:{model:e.userLoginForm,rules:e.userLoginRules,"label-position":"left"}},[s("el-form-item",{attrs:{prop:"username"}},[s("el-input",{attrs:{"prefix-icon":"el-icon-user",placeholder:"用户名"},model:{value:e.userLoginForm.username,callback:function(r){e.$set(e.userLoginForm,"username",r)},expression:"userLoginForm.username"}})],1),s("el-form-item",{attrs:{prop:"password"}},[s("el-input",{attrs:{"show-password":"","prefix-icon":"el-icon-lock",placeholder:"密码"},model:{value:e.userLoginForm.password,callback:function(r){e.$set(e.userLoginForm,"password",r)},expression:"userLoginForm.password"}})],1),s("el-form-item",[s("el-button",{staticClass:"login-btn",attrs:{loading:e.loading,type:"primary"},nativeOn:{click:function(r){return r.preventDefault(),e.handleLogin.apply(null,arguments)}}},[e._v(" 登录 ")])],1)],1)],1)])},n=[function(){var e=this,r=e.$createElement,s=e._self._c||r;return s("div",{staticClass:"login-bk"},[s("div",{staticClass:"login-bk-shadow"})])}],i=function(){return{username:"",password:""}},t={name:"Login",data:function(){return{redirect:"",userLoginForm:i(),userLoginRules:{username:[{required:!0,message:"用户名不能为空",trigger:"blur"}],password:[{required:!0,message:"密码不能为空",trigger:"blur"}]},loading:!1}},watch:{$route:{handler:function(e){var r=e.query;r&&(this.redirect=r.redirect)},immediate:!0}},beforeDestroy:function(){},methods:{resetFormFields:function(){this.userLoginForm=i(),this.$refs.userLoginForm.resetFields()},handleLogin:function(){var e=this,r=this.userLoginForm,s=r.username,o=r.password,n={username:s,password:o};this.$refs.userLoginForm.validate((function(r){if(!r)return console.log("invalid form"),!1;e.loading=!0,e.$store.dispatch("user/login",n).then((function(r){0===+r.code?(e.$message.success("登录成功"),e.$router.push({path:e.redirect||"/"})):e.$message.error(r.message||"登录错误"),e.loading=!1})).catch((function(){e.loading=!1}))}))}}},a=t,u=(s("8856"),s("2877")),l=Object(u["a"])(a,o,n,!1,null,"516ecfd4",null);r["default"]=l.exports}}]);